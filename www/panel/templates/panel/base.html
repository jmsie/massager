{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Modern Dashboard{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <!--Extra css-->
    {% block extra_css %}{% endblock %}
    {% block head %}{% endblock %}
</head>
<body>
    <div class="container">
        <!-- Mobile Toggle Button -->
        <button class="mobile-toggle" onclick="toggleSidebar()">
            ☰
        </button>

        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <h1>Dashboard</h1>
            </div>

            <!-- Main Navigation Section -->
            <div class="nav-section">
                <div class="section-header" onclick="toggleSection('main-nav')">
                    <span>主要導航</span>
                    <span class="section-toggle" id="main-nav-toggle">▼</span>
                </div>
                <ul class="nav-menu" id="main-nav">
                    <li class="nav-item">
                        <a href="{% url 'portal_home' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                            </svg>
                            首頁
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5" />
                            </svg>
                            推播
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Content Management Section -->
            <div class="nav-section">
                <div class="section-header" onclick="toggleSection('content-nav')">
                    <span>師傅管理</span>
                    <span class="section-toggle" id="content-nav-toggle">▼</span>
                </div>
                <ul class="nav-menu" id="content-nav">
                    <li class="nav-item">
                        <a href="{% url 'manage_therapists' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                            </svg>
                            編輯師傅清單
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'manage_massage_plans' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            按摩方案管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'manage_reservations' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                            </svg>
                            預約管理
                        </a>
                    </li>                    
                    <li class="nav-item">
                        <a href="{% url 'manage_invitations' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
                                <path d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"/>
                            </svg>
                            邀請管理
                        </a>
                    </li>                    
                </ul>
            </div>

            <!-- User Management Section -->
            <div class="nav-section">
                <div class="section-header" onclick="toggleSection('user-nav')">
                    <span>評論管理</span>
                    <span class="section-toggle" id="user-nav-toggle">▼</span>
                </div>
                <ul class="nav-menu" id="user-nav">
                    <li class="nav-item">
                        <a href="{% url 'manage_surveys' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                            </svg>
                            問卷清單
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            問卷分析
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Settings Section -->
            <div class="nav-section">
                <div class="section-header" onclick="toggleSection('settings-nav')">
                    <span>設定</span>
                    <span class="section-toggle" id="settings-nav-toggle">▼</span>
                </div>
                <!-- Log out -->
                <ul class="nav-menu" id="settings-nav">
                    <li class="nav-item">
                        <a href="{% url 'logout' %}" class="nav-link">
                            <svg class="nav-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 3a7 7 0 100 14 7 7 0 000-14zm1 4H9v2h2V7zm0 4H9v2h2v-2z"/>
                            </svg>
                            登出
                        </a>
                    </li>
                </ul>
            </div>

            <div class="section-divider"></div>

        </nav>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
        {% block content %}
        {% endblock %}
        </div>
    
    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('open');
            sidebar.classList.toggle('closed');
        }

        function toggleSection(sectionId) {
            const menu = document.getElementById(sectionId);
            const toggle = document.getElementById(sectionId + '-toggle');
            
            menu.classList.toggle('collapsed');
            toggle.classList.toggle('collapsed');
        }
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-toggle');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(e.target) && 
                !toggle.contains(e.target) && 
                sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
                sidebar.classList.add('closed');
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
